import os
import pickle
import pyjadx
from tqdm import tqdm
from androguard.misc import AnalyzeAPK
from androidcrypto.dataset import Dataset
from androguard.core.analysis import analysis
import lzma

def main():
    in_path = '/Users/adam/phd/projects/CryptoMalware/experiments/decompiling/20191022t130803/baby_dataset/data/test/asd'
    files = [os.path.join(in_path, x) for x in os.listdir(in_path)]

    print(files)



    analysis_files = []

    for f in files:
        with lzma.open(f, 'rb') as handle:
            try:
                analysis_files.append(pickle.load(handle))
            except Exception as e:
                print(e)
    print(len(analysis_files))

    print(analysis_files[0])



if __name__ == '__main__':
    main()





