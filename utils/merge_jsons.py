import argparse
import sys
import json

def merge_dicts(a, b):

    result = a
    for k, v in b.items():
        result[k] = v
    return result

def main() -> None:

    parser = argparse.ArgumentParser("Merge jsons.")
    parser.add_argument(
        "output_json_path",
        metavar="OUTPUT_JSON_PATH",
        type=str,
        help="path to output json"
    )
    parser.add_argument(
        "input_json_paths",
        metavar="INPUT_JSON_PATHs",
        type=str,
        nargs="+",
        help="path to input jsons"
    )
    args = parser.parse_args()

    result = {}
    for path in args.input_json_paths:
        with open(path, "r") as handle:
            tmp = json.load(handle)
        result = merge_dicts(result, tmp)
        print(len(result))    

    with open(args.output_json_path, "w") as handle:
        json.dump(result, handle)    
    
if __name__ == "__main__":

    main()
    
    
