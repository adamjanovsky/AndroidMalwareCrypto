import argparse

from android_malware_labeling.preparation.config import parse_preparation_config
from android_malware_labeling.preparation.api import prepare_based_on_config

def main() -> None:
    
    parser = argparse.ArgumentParser(description="Prepare data")
    parser.add_argument(
        "config_path",
        metavar="CONFIG_PATH", 
        type=str, 
        help="path to config file in yaml"
    )
    args = parser.parse_args()
    path = args.config_path

    config = parse_preparation_config(path)
    if config is None:
        print("Invalid config.")
        exit(1)
    prepare_based_on_config(config)

if __name__ == "__main__":
    main()
