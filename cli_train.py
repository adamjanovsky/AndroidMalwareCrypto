import argparse

from android_malware_labeling.training.config import parse_training_config
from android_malware_labeling.training.api import train_based_on_config

def main() -> None:
    
    parser = argparse.ArgumentParser(description="Train models")
    parser.add_argument(
        "config_path",
        metavar="CONFIG_PATH", 
        type=str, 
        help="path to config file in yaml"
    )
    args = parser.parse_args()
    path = args.config_path

    config = parse_training_config(path)
    if config is None:
        print("Invalid config.")
        exit(1)
    train_based_on_config(config)

if __name__ == "__main__":
    main()
